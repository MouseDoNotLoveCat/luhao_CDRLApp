# å¯¼å…¥åŠŸèƒ½æ¶æ„è°ƒæ•´ - å®æ–½æ–¹æ¡ˆæ€»ç»“

## ğŸ¯ æ ¸å¿ƒé—®é¢˜

**å½“å‰çŠ¶æ€**ï¼šå¯¼å…¥åŠŸèƒ½å¤±è´¥ï¼Œ0 æ¡è®°å½•è¢«å¯¼å…¥

**æ ¹æœ¬åŸå› **ï¼š
- `issues` è¡¨çš„ `section_id` å­—æ®µæœ‰ NOT NULL çº¦æŸ
- æ ‡æ®µè¯†åˆ«å’ŒåŒ¹é…é€»è¾‘è¿‡äºå¤æ‚ï¼Œç»å¸¸å¤±è´¥
- æ ‡æ®µæ’å…¥å¤±è´¥ â†’ `section_id` ä¸º None â†’ é—®é¢˜æ’å…¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼šç§»é™¤ `section_id` å¤–é”®çº¦æŸï¼Œæ”¹ä¸ºç›´æ¥å­˜å‚¨ `section_name` æ–‡æœ¬å­—æ®µ

---

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | å·¥ä½œé‡ |
|------|------|------|--------|
| **å½“å‰æ–¹æ¡ˆ** | ç®€å•ã€å¿«é€Ÿã€æ ¹æœ¬è§£å†³ | å¤±å»æ•°æ®åº“çº§åˆ«çš„æ ‡æ®µå…³è” | ä¸­ç­‰ |
| æ”¹è¿›æ ‡æ®µåŒ¹é… | ä¿ç•™å¤–é”®ã€æ•°æ®å®Œæ•´æ€§å¥½ | å¤æ‚ã€å®¹æ˜“å‡ºé”™ | å¤§ |
| æ·»åŠ æ ‡æ®µç®¡ç†ç•Œé¢ | ç”¨æˆ·å‹å¥½ | éœ€è¦é¢å¤–å¼€å‘ | å¤§ |

**æ¨è**ï¼šå½“å‰æ–¹æ¡ˆæœ€ä¼˜

---

## ğŸ“ å®æ–½æ–‡æ¡£

### 1. `IMPLEMENTATION_PLAN.md`
- æ•°æ®åº“è¿ç§»æ–¹æ¡ˆï¼ˆSQL è„šæœ¬ï¼‰
- åç«¯ä»£ç ä¿®æ”¹æ–¹æ¡ˆ
- å‰ç«¯ä»£ç ä¿®æ”¹æ–¹æ¡ˆ
- æ½œåœ¨é£é™©å’Œæ³¨æ„äº‹é¡¹

### 2. `FRONTEND_MODIFICATION_PLAN.md`
- ImportPreview.vue ä¿®æ”¹æ–¹æ¡ˆ
- ImportConfirm.vue ä¿®æ”¹æ–¹æ¡ˆ
- importStore.js ä¿®æ”¹æ–¹æ¡ˆ
- åç«¯ API ä¿®æ”¹æ–¹æ¡ˆ

### 3. `RISK_ASSESSMENT_AND_BACKUP.md`
- é£é™©è¯„ä¼°çŸ©é˜µ
- å®Œæ•´å¤‡ä»½æ–¹æ¡ˆ
- å›æ»šæ–¹æ¡ˆ
- æµ‹è¯•è®¡åˆ’
- è¿ç§»æ‰§è¡Œæ¸…å•

---

## ğŸ”„ å®æ–½æµç¨‹

### ç¬¬ä¸€é˜¶æ®µï¼šå‡†å¤‡ï¼ˆ1 å°æ—¶ï¼‰

1. âœ… å¤‡ä»½æ•°æ®åº“
   ```bash
   mkdir -p backups/$(date +%Y%m%d_%H%M%S)
   cp backend/cdrl.db backups/$(date +%Y%m%d_%H%M%S)/cdrl.db.backup
   sqlite3 backend/cdrl.db ".dump" > backups/$(date +%Y%m%d_%H%M%S)/cdrl_dump.sql
   ```

2. âœ… éªŒè¯å¤‡ä»½
   ```bash
   sqlite3 backups/$(date +%Y%m%d_%H%M%S)/cdrl.db.backup "SELECT COUNT(*) FROM issues;"
   ```

3. âœ… åœæ­¢åº”ç”¨
   ```bash
   pkill -f "uvicorn"
   ```

### ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®åº“è¿ç§»ï¼ˆ30 åˆ†é’Ÿï¼‰

1. âœ… æ‰§è¡Œè¿ç§»è„šæœ¬
   ```bash
   sqlite3 backend/cdrl.db < backend/scripts/migrate_issues_table.sql
   ```

2. âœ… éªŒè¯è¿ç§»ç»“æœ
   ```bash
   sqlite3 backend/cdrl.db ".schema issues" | grep section
   sqlite3 backend/cdrl.db "SELECT COUNT(*) FROM issues;"
   ```

### ç¬¬ä¸‰é˜¶æ®µï¼šä»£ç ä¿®æ”¹ï¼ˆ1 å°æ—¶ï¼‰

1. âœ… ä¿®æ”¹åç«¯ä»£ç 
   - `backend/app/services/import_service.py`ï¼šä¿®æ”¹ `_insert_issue` æ–¹æ³•
   - `database_schema.sql`ï¼šæ›´æ–°è¡¨åˆ›å»ºè¯­å¥

2. âœ… ä¿®æ”¹å‰ç«¯ä»£ç 
   - `frontend/src/stores/importStore.js`ï¼šæ–°å¢æ–¹æ³•
   - `frontend/src/components/ImportPreview.vue`ï¼šè¡Œå†…ç¼–è¾‘
   - `frontend/src/components/ImportConfirm.vue`ï¼šå®Œæ•´æ˜¾ç¤º

### ç¬¬å››é˜¶æ®µï¼šæµ‹è¯•ï¼ˆ1 å°æ—¶ï¼‰

1. âœ… å¯åŠ¨åº”ç”¨
   ```bash
   cd backend && python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 &
   ```

2. âœ… æ‰§è¡Œæµ‹è¯•
   - å¯¼å…¥æ–°çš„ Word æ–‡æ¡£
   - éªŒè¯é—®é¢˜æ˜¯å¦æ­£ç¡®å¯¼å…¥
   - éªŒè¯æ ‡æ®µåç§°æ˜¯å¦æ­£ç¡®ä¿å­˜
   - éªŒè¯ç°æœ‰åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## ğŸ“‹ ä¿®æ”¹æ¸…å•

### æ•°æ®åº“

- [ ] åˆ›å»ºè¿ç§»è„šæœ¬ `backend/scripts/migrate_issues_table.sql`
- [ ] æ‰§è¡Œè¿ç§»è„šæœ¬
- [ ] éªŒè¯è¡¨ç»“æ„
- [ ] éªŒè¯æ•°æ®å®Œæ•´æ€§

### åç«¯

- [ ] ä¿®æ”¹ `_insert_issue` æ–¹æ³•ï¼ˆç§»é™¤æ ‡æ®µåŒ¹é…é€»è¾‘ï¼‰
- [ ] ç§»é™¤ `ProjectSectionMatcher` å¯¼å…¥
- [ ] ä¿®æ”¹ `database_schema.sql`
- [ ] æ–°å¢ `/api/sections` ç«¯ç‚¹
- [ ] ä¿®æ”¹ `/api/import/selected` ç«¯ç‚¹

### å‰ç«¯

- [ ] ä¿®æ”¹ `importStore.js`ï¼ˆæ–°å¢æ–¹æ³•ï¼‰
- [ ] ä¿®æ”¹ `ImportPreview.vue`ï¼ˆè¡Œå†…ç¼–è¾‘ã€æ ‡æ®µé€‰æ‹©ï¼‰
- [ ] ä¿®æ”¹ `ImportConfirm.vue`ï¼ˆå®Œæ•´æ˜¾ç¤ºã€å¿«é€Ÿç¼–è¾‘ï¼‰

---

## âœ… éªŒè¯æ¸…å•

### åŠŸèƒ½éªŒè¯

- [ ] å¯¼å…¥æ—¶èƒ½æ­£ç¡®æ˜¾ç¤ºæ ‡æ®µåç§°
- [ ] èƒ½ç¼–è¾‘æ ‡æ®µåç§°
- [ ] æ ‡æ®µä¸‹æ‹‰é€‰æ‹©æ­£å¸¸å·¥ä½œ
- [ ] é—®é¢˜ç±»åˆ«ç­›é€‰æ­£å¸¸å·¥ä½œ
- [ ] ç¼–è¾‘åçš„æ•°æ®èƒ½æ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“
- [ ] ç°æœ‰é—®é¢˜æŸ¥è¯¢åŠŸèƒ½ä¸å—å½±å“
- [ ] é—®é¢˜è¯¦æƒ…é¡µé¢æ­£å¸¸æ˜¾ç¤º
- [ ] é—®é¢˜ç¼–è¾‘åŠŸèƒ½æ­£å¸¸å·¥ä½œ

### æ€§èƒ½éªŒè¯

- [ ] å¯¼å…¥é€Ÿåº¦æ˜¯å¦æœ‰æ˜æ˜¾å˜åŒ–
- [ ] æŸ¥è¯¢é€Ÿåº¦æ˜¯å¦æœ‰æ˜æ˜¾å˜åŒ–
- [ ] æ•°æ®åº“å¤§å°æ˜¯å¦æœ‰æ˜æ˜¾å˜åŒ–

### æ•°æ®éªŒè¯

- [ ] ç°æœ‰é—®é¢˜æ•°æ®æ˜¯å¦å®Œæ•´
- [ ] æ ‡æ®µåç§°æ˜¯å¦æ­£ç¡®è½¬æ¢
- [ ] æ˜¯å¦æœ‰æ•°æ®ä¸¢å¤±

---

## ğŸš¨ é£é™©ç¼“è§£

| é£é™© | ç¼“è§£æ–¹æ¡ˆ |
|------|---------|
| è¿ç§»å¤±è´¥ | å®Œæ•´å¤‡ä»½ + å¿«é€Ÿå›æ»šè„šæœ¬ |
| æ•°æ®ä¸¢å¤± | ä½¿ç”¨ LEFT JOIN ä¿ç•™æ‰€æœ‰æ•°æ® |
| åº”ç”¨å¯åŠ¨å¤±è´¥ | å›æ»šä»£ç  + æ¢å¤å¤‡ä»½ |
| ç”¨æˆ·æ•°æ®æ··ä¹± | è¿ç§»å‰é€šçŸ¥ç”¨æˆ· + å……åˆ†æµ‹è¯• |

---

## ğŸ“ åº”æ€¥æ–¹æ¡ˆ

### å¿«é€Ÿå›æ»šï¼ˆ< 1 åˆ†é’Ÿï¼‰

```bash
# åœæ­¢åº”ç”¨
pkill -f "uvicorn"

# æ¢å¤å¤‡ä»½
cp backups/YYYYMMDD_HHMMSS/cdrl.db.backup backend/cdrl.db

# é‡å¯åº”ç”¨
cd backend && python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 &
```

### å®Œæ•´å›æ»šï¼ˆåŒ…æ‹¬ä»£ç ï¼‰

```bash
# æ¢å¤æ•°æ®åº“
cp backups/YYYYMMDD_HHMMSS/cdrl.db.backup backend/cdrl.db

# æ¢å¤ä»£ç 
git checkout HEAD -- backend/app/services/import_service.py
git checkout HEAD -- database_schema.sql

# é‡å¯åº”ç”¨
pkill -f "uvicorn"
cd backend && python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 &
```

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### å¯¼å…¥åŠŸèƒ½

- âœ… å¯¼å…¥æˆåŠŸç‡ä» 0% æå‡åˆ° 100%
- âœ… ç”¨æˆ·å¯ä»¥æ‰‹åŠ¨ä¿®æ­£æ ‡æ®µåç§°
- âœ… æ”¯æŒæ ‡æ®µä¸‹æ‹‰é€‰æ‹©
- âœ… æ”¯æŒé—®é¢˜ç±»åˆ«ç­›é€‰

### ç”¨æˆ·ä½“éªŒ

- âœ… å¯¼å…¥ç•Œé¢æ›´åŠ å‹å¥½
- âœ… æ”¯æŒè¡Œå†…ç¼–è¾‘
- âœ… æ”¯æŒå¿«é€Ÿç¼–è¾‘å¯¹è¯æ¡†
- âœ… æ”¯æŒæ•°æ®éªŒè¯

### ç³»ç»Ÿç¨³å®šæ€§

- âœ… ç§»é™¤å¤æ‚çš„æ ‡æ®µåŒ¹é…é€»è¾‘
- âœ… å‡å°‘å¯¼å…¥å¤±è´¥çš„å¯èƒ½æ€§
- âœ… æé«˜ç³»ç»Ÿå¯ç»´æŠ¤æ€§

---

## ğŸ“ åç»­å·¥ä½œ

### çŸ­æœŸï¼ˆ1-2 å‘¨ï¼‰

1. å®Œæˆæ•°æ®åº“è¿ç§»
2. å®Œæˆä»£ç ä¿®æ”¹
3. å®Œæˆæµ‹è¯•
4. å‘å¸ƒæ–°ç‰ˆæœ¬

### ä¸­æœŸï¼ˆ1-2 ä¸ªæœˆï¼‰

1. æ·»åŠ æ ‡æ®µç®¡ç†ç•Œé¢
2. æ·»åŠ é—®é¢˜ç±»åˆ«ç®¡ç†ç•Œé¢
3. ä¼˜åŒ–å¯¼å…¥æ€§èƒ½

### é•¿æœŸï¼ˆ3-6 ä¸ªæœˆï¼‰

1. æ·»åŠ æ‰¹é‡å¯¼å…¥åŠŸèƒ½
2. æ·»åŠ æ•°æ®éªŒè¯è§„åˆ™
3. æ·»åŠ å¯¼å…¥å†å²è®°å½•

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- `IMPLEMENTATION_PLAN.md` - è¯¦ç»†å®æ–½æ–¹æ¡ˆ
- `FRONTEND_MODIFICATION_PLAN.md` - å‰ç«¯ä¿®æ”¹æ–¹æ¡ˆ
- `RISK_ASSESSMENT_AND_BACKUP.md` - é£é™©è¯„ä¼°å’Œå¤‡ä»½æ–¹æ¡ˆ


