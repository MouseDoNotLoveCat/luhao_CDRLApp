# 项目与标段管理 - 测试指南

**版本**: 1.0  
**日期**: 2025-11-07

---

## 🧪 测试概述

本文档提供了项目与标段管理功能的完整测试指南，包括：
- 单元测试
- 集成测试
- 功能测试
- 性能测试

---

## 📋 测试环境

### 系统要求
- Python 3.8+
- Node.js 18.0.0+
- SQLite 3.0+

### 依赖安装

```bash
# 后端依赖
cd backend
pip install -r requirements.txt

# 前端依赖
cd frontend
npm install
```

---

## 🔧 API 测试

### 自动化测试脚本

运行完整的 API 测试：

```bash
cd backend
python scripts/test_project_management_api.py
```

**测试覆盖**:
- ✅ 项目 CRUD 操作
- ✅ 标段 CRUD 操作
- ✅ 搜索功能
- ✅ 分页功能
- ✅ 级联删除

### 手动测试

#### 测试 1: 创建项目

```bash
curl -X POST "http://localhost:8000/api/projects" \
  -H "Content-Type: application/json" \
  -d '{
    "project_name": "测试项目",
    "builder_unit": "测试建设单位"
  }'
```

**预期结果**: 返回 200，包含新建项目的 ID

#### 测试 2: 获取项目列表

```bash
curl "http://localhost:8000/api/projects?search=测试"
```

**预期结果**: 返回 200，包含搜索结果

#### 测试 3: 创建标段

```bash
curl -X POST "http://localhost:8000/api/sections" \
  -H "Content-Type: application/json" \
  -d '{
    "project_id": 1,
    "section_code": "TEST-001",
    "section_name": "测试标段",
    "contractor_unit": "施工单位"
  }'
```

**预期结果**: 返回 200，包含新建标段的 ID

#### 测试 4: 删除项目（级联删除）

```bash
curl -X DELETE "http://localhost:8000/api/projects/1?cascade=true"
```

**预期结果**: 返回 200，项目及其标段被删除

---

## 🖥️ 前端功能测试

### 测试场景 1: 项目列表操作

**步骤**:
1. 打开应用，进入"项目与标段管理"页面
2. 验证项目列表显示正确
3. 在搜索框输入关键词，验证搜索功能
4. 点击分页按钮，验证分页功能

**预期结果**:
- ✅ 项目列表正确显示
- ✅ 搜索功能正常工作
- ✅ 分页功能正常工作

### 测试场景 2: 创建项目

**步骤**:
1. 点击"新建项目"按钮
2. 填写项目名称和建设单位
3. 点击"创建"按钮
4. 验证项目是否添加到列表

**预期结果**:
- ✅ 表单对话框打开
- ✅ 表单验证正常工作
- ✅ 项目创建成功
- ✅ 列表自动刷新

### 测试场景 3: 编辑项目

**步骤**:
1. 在项目列表中找到一个项目
2. 点击"编辑"按钮
3. 修改项目信息
4. 点击"更新"按钮
5. 验证项目信息是否更新

**预期结果**:
- ✅ 表单预填充现有数据
- ✅ 修改成功
- ✅ 列表自动刷新

### 测试场景 4: 删除项目

**步骤**:
1. 在项目列表中找到一个项目
2. 点击"删除"按钮
3. 在确认对话框中点击"确定"
4. 验证项目是否从列表中删除

**预期结果**:
- ✅ 确认对话框显示
- ✅ 项目删除成功
- ✅ 列表自动刷新

### 测试场景 5: 查看标段列表

**步骤**:
1. 在项目列表中找到一个项目
2. 点击"查看标段"按钮
3. 验证标段列表显示正确
4. 验证项目信息卡片显示正确

**预期结果**:
- ✅ 进入标段列表页面
- ✅ 标段列表显示正确
- ✅ 项目信息卡片显示正确
- ✅ 面包屑导航显示正确

### 测试场景 6: 创建标段

**步骤**:
1. 在标段列表页面点击"新建标段"按钮
2. 填写标段信息
3. 点击"创建"按钮
4. 验证标段是否添加到列表

**预期结果**:
- ✅ 表单对话框打开
- ✅ 表单验证正常工作
- ✅ 标段创建成功
- ✅ 列表自动刷新

### 测试场景 7: 编辑标段

**步骤**:
1. 在标段列表中找到一个标段
2. 点击"编辑"按钮
3. 修改标段信息
4. 点击"更新"按钮
5. 验证标段信息是否更新

**预期结果**:
- ✅ 表单预填充现有数据
- ✅ 修改成功
- ✅ 列表自动刷新

### 测试场景 8: 删除标段

**步骤**:
1. 在标段列表中找到一个标段
2. 点击"删除"按钮
3. 在确认对话框中点击"确定"
4. 验证标段是否从列表中删除

**预期结果**:
- ✅ 确认对话框显示
- ✅ 标段删除成功
- ✅ 列表自动刷新

### 测试场景 9: 返回项目列表

**步骤**:
1. 在标段列表页面点击"返回项目列表"按钮
2. 验证是否返回到项目列表

**预期结果**:
- ✅ 返回到项目列表
- ✅ 项目列表显示正确

---

## 📊 性能测试

### 测试场景: 大数据量处理

**步骤**:
1. 创建 1000 个项目
2. 为每个项目创建 10 个标段
3. 测试列表加载时间
4. 测试搜索响应时间

**预期结果**:
- ✅ 列表加载时间 < 2 秒
- ✅ 搜索响应时间 < 1 秒
- ✅ 分页功能正常工作

---

## ✅ 测试检查清单

### 后端测试
- [ ] 所有 API 端点返回正确的状态码
- [ ] 所有 API 端点返回正确的数据格式
- [ ] 错误处理正常工作
- [ ] 数据验证正常工作
- [ ] 数据库约束正常工作

### 前端测试
- [ ] 所有页面正确加载
- [ ] 所有表单验证正常工作
- [ ] 所有按钮功能正常工作
- [ ] 所有搜索功能正常工作
- [ ] 所有分页功能正常工作
- [ ] 所有导航功能正常工作
- [ ] 所有错误提示正常显示
- [ ] 所有成功提示正常显示

### 集成测试
- [ ] 前后端通信正常
- [ ] 数据同步正常
- [ ] 错误处理正常
- [ ] 性能满足要求

---

## 🐛 已知问题

暂无已知问题。

---

## 📞 获取帮助

- 查看完整文档: [项目管理实现文档](../features/PROJECT_MANAGEMENT_IMPLEMENTATION.md)
- 查看快速开始: [快速开始指南](../reference/PROJECT_MANAGEMENT_QUICK_START.md)
- 查看 API 参考: [API 参考文档](../reference/PROJECT_MANAGEMENT_API_REFERENCE.md)

---

**最后更新**: 2025-11-07


